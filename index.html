<!doctype html>
<html>
	<head>
		<title>Game</title>
	</head>
	<body style="margin:0px;background-color:navy;">
		<canvas style="background-color:white;" width="600" height="600"></canvas>
		<script src="/socket.io/socket.io.js"></script>
		<script
  src="https://code.jquery.com/jquery-3.3.1.js"
  integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
  crossorigin="anonymous"></script>
  		<script src="https://scalarfield.github.io/js/tools/memekit.js"></script>
		<script>

let c = document.querySelector('canvas');
let f = c.getContext('2d');

let x = y = 300;
let xv = yv = 0;
let xa = ya = 0;
			
let socket = io();
socket.on('keyin', (n)=>{
	let e = new Event('keydown');
	e.which = e.keyCode = n;
	window.dispatchEvent(e);
});
socket.on('keyout', (n)=>{
         let e = new Event('keyup');
         e.which = e.keyCode = n;
         window.dispatchEvent(e);
});
socket.on('move', (n)=>{
	//console.log(n);
	xv = Math.round(n.x);
	ya = Math.round(n.z);
});

function render(){
 f.clearRect(0, 0, 600, 600);
 yv += ya
 xv += xa;
 x += xv;
 y += yv;
console.log(xa, ya, xv, yv);
 f.fillRect(x, y, 40, 40);
}

let loop = setInterval(render, 1000/60);

		</script>
	</body>
</html>
